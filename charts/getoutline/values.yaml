image:
  repository: outlinewiki/outline
  pullPolicy: IfNotPresent
  tag: 1.0.0-2

fallbackDefaults:
  probeType: http

service:
  main:
    ports:
      main:
        port: 3000
        protocol: http

workload:
  main:
    podSpec:
      containers:
        main:
          env:
            # Database configuration
            # When using the included postgresql chart, this will be automatically configured
            DATABASE_URL:
              secretKeyRef:
                name: '{{ include "tc.v1.common.lib.chart.names.fullname" . }}-db'
                key: database-url
            # Redis configuration
            # When using the included redis chart, this will be automatically configured
            REDIS_URL:
              secretKeyRef:
                name: '{{ include "tc.v1.common.lib.chart.names.fullname" . }}-redis'
                key: redis-url
            # S3 Storage Configuration (Optional)
            # Uncomment and configure these to use S3-compatible storage instead of local storage
            # AWS_ACCESS_KEY_ID:
            #   secretKeyRef:
            #     name: '{{ include "tc.v1.common.lib.chart.names.fullname" . }}-s3'
            #     key: access-key-id
            # AWS_SECRET_ACCESS_KEY:
            #   secretKeyRef:
            #     name: '{{ include "tc.v1.common.lib.chart.names.fullname" . }}-s3'
            #     key: secret-access-key
            # AWS_REGION: us-east-1
            # AWS_S3_UPLOAD_BUCKET_URL: https://s3.amazonaws.com
            # AWS_S3_UPLOAD_BUCKET_NAME: outline-bucket
            # AWS_S3_UPLOAD_MAX_SIZE: "26214400"
            # AWS_S3_FORCE_PATH_STYLE: "false"
            # AWS_S3_ACL: private
          probes:
            liveness:
              type: http
              path: /
            readiness:
              type: http
              path: /
            startup:
              type: http
              path: /

persistence:
  data:
    enabled: true
    mountPath: "/var/lib/outline/data"
    size: 1Gi

# PostgreSQL dependency configuration
# Set enabled to false if you want to use an external PostgreSQL instance
postgresql:
  enabled: true
  auth:
    username: outline
    password: changeme
    database: outline
  primary:
    persistence:
      enabled: true
      size: 8Gi

# Redis dependency configuration
# Set enabled to false if you want to use an external Redis instance
redis:
  enabled: true
  auth:
    enabled: false
  master:
    persistence:
      enabled: true
      size: 1Gi
